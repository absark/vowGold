{"version":3,"sources":["./src/app/main/razorpay/razorpay.page.html","./src/app/main/razorpay/razorpay-routing.module.ts","./src/app/main/razorpay/razorpay.module.ts","./src/app/main/razorpay/razorpay.page.scss","./src/app/main/razorpay/razorpay.page.ts"],"names":[],"mappings":"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","file":"razorpay-razorpay-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/main/tabs/home\\\" class=\\\"text-white\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Make Payment</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n<ion-grid class=\\\"gradient\\\" style=\\\"height: 100%; padding-top: 25%;\\\">\\n  <ion-row>\\n    <ion-col size-sm=\\\"8\\\" offset-sm=\\\"2\\\">\\n      <form class=\\\"mx-2 mt-5\\\" [formGroup]=\\\"payment\\\" (ngSubmit)=\\\"onSubmit(payment)\\\">\\n        <div class=\\\"mb-1\\\">\\n          <input type=\\\"email\\\" placeholder=\\\"Email\\\" class=\\\"form-control\\\"  formControlName=\\\"email\\\">\\n        </div>\\n        <div class=\\\"mb-2\\\">\\n          <input type=\\\"number\\\" placeholder=\\\"Amount\\\" class=\\\"form-control\\\" #amount formControlName=\\\"amount\\\">\\n          \\n        </div>\\n        <ion-button type=\\\"submit\\\" expand=\\\"block\\\" [disabled]=\\\"payment.invalid \\\">Payment Method</ion-button>\\n        <div class=\\\"alert alert-danger\\\" *ngIf=\\\"error\\\">{{error}}</div>\\n      </form>\\n      \\n    </ion-col>\\n  </ion-row>\\n</ion-grid>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RazorpayPage } from './razorpay.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RazorpayPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RazorpayPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RazorpayPageRoutingModule } from './razorpay-routing.module';\n\nimport { RazorpayPage } from './razorpay.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RazorpayPageRoutingModule\n  ],\n  declarations: [RazorpayPage]\n})\nexport class RazorpayPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21haW4vcmF6b3JwYXkvcmF6b3JwYXkucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NgForm, FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { LoadingController } from '@ionic/angular';\nimport { SharedService } from '../services/shared.service';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { RazorpayService } from 'src/app/services/razorpay.service';\nimport { Router } from '@angular/router';\ndeclare var Razorpay;\n@Component({\n  selector: 'app-razorpay',\n  templateUrl: './razorpay.page.html',\n  styleUrls: ['./razorpay.page.scss'],\n})\nexport class RazorpayPage implements OnInit {\n  payment:FormGroup;\n  windowRef:any;\n  email:string;\n  phone:number;\n  error:string;\n  constructor(\n    private formBuilder: FormBuilder,\n    private razorpay:RazorpayService,\n    private service:SharedService,\n    private loading:LoadingController,\n    private auth:AuthService,\n    private router:Router\n    ) { }\n \n  ngOnInit() {\n    this.payment = this.formBuilder.group({\n      email:[ this.email, [Validators.required,Validators.email]],\n      amount:[null,[Validators.required]]\n    });\n    this.windowRef = this.razorpay.WindowRef;\n    \n  }\n\n  ionViewWillEnter(){\n    this.loading.create({\n      message:'Loading...'\n    }).then(el=>{el.present()});\n\n   if(this.service.user){\n    this.service.getUser().subscribe(res => {\n      this.loading.dismiss();\n      this.email = res.user.email;\n      this.phone = res.user.mobile;\n      this.ngOnInit();\n    },\n    err=>{\n      this.loading.dismiss();\n      this.auth.showAlert(err.error.message);\n    })\n   }\n  }\n\n\n\n  onSubmit(form:NgForm){\n    this.error = '';\n    if (this.payment.invalid) {\n        return;\n    }\n    if(form.value.amount<999){\n      this.error = 'Amount must be greater than 999';\n      return;\n    }\n    \n    this.razorpay.payment(this.payment.value).subscribe(res =>{\n      let options={\n        \"id\":res.data.id,\n        \"amount\":res.data.amount,\n        \"receipt\":res.data.receipt,\n        \"currency\":res.data.currency,\n        \"name\":'VowGolds',\n        \"key\": \"rzp_test_BSjuo0zrfmh2me\",\n        \"handler\":(payment_id)=>{\n          this.razorpay.paymentInfo({\n          payment_id:payment_id.razorpay_payment_id,\n          amount:res.data.amount/100,\n          date:res.data.date,\n          email:form.value.email,\n          user_id:this.auth.user.id\n          }).subscribe(res =>{\n            form.reset();\n            setTimeout(()=>{this.router.navigate(['/','main','tabs','home'])},1500);\n          },\n          err=>{\n           this.auth.showAlert(err.error.message);\n          })\n        \n        },\n       \"prefill\": {\n           \"email\": form.value.email,\n           \"contact\":this.phone\n       }\n      };\n     const pay= new  this.windowRef.Razorpay(options);\n      pay.open();\n      console.log(pay);\n\n    })\n   \n  }\n\n  callbackFun(paymentInfo){\n      console.log(\"Handler\",paymentInfo)\n  }\n}\n"],"sourceRoot":"webpack:///"}